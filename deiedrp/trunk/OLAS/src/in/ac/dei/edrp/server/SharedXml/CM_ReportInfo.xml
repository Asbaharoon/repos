<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap 
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="CourseInfo">

	<resultMap id="getuniversitydateResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="university_start_date" column="start_date" />
		<result property="university_end_date" column="end_date" />
	</resultMap>
	<select id="getuniversitydate" resultMap="getuniversitydateResult">
		select start_date,end_date from UNIVERSITY where
		university_id=#university_id#
</select>

	<resultMap id="getentityDescriptionResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="entity_description" column="entity_description" />
	</resultMap>
	<select id="getentityDescription" resultMap="getentityDescriptionResult">
		select distinct entity_description from UNIVERSITY_ENTITY_TYPE where
		entity_type=#entity_type#;
</select>

	<resultMap id="result" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="entity_description" column="entity_description" />
		<!-- Added new -->
		<result property="entity_type" column="entity_type" />
	</resultMap>
	<select id="entityListReport" resultMap="result">
		select distinct entity_type,entity_description from UNIVERSITY_ENTITY_TYPE
		where university_id=#university_id#
</select>

	<resultMap id="getentityTypeResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="entity_type" column="entity_type" />
	</resultMap>
	<select id="getentityTypeReport" resultMap="getentityTypeResult">
		select entity_type
		from UNIVERSITY_ENTITY_TYPE where
		entity_description=#entity_description#
	</select>

	<resultMap id="resultname" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="entity_name" column="entity_name" />
		<result property="entity_id" column="entity_id" />
	</resultMap>
	<select id="entityNameListReport" resultMap="resultname">
		select
		entity_id,entity_name from ENTITY_MASTER where
		entity_type=#entity_type# AND university_id=#university_id#;
	</select>

	<resultMap id="resultprogram" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="program_name" column="p.program_name" />
		<result property="program_id" column="p.program_id" />
	</resultMap>

	<select id="programNameListReport" resultMap="resultprogram">
		 select distinct p.program_name,p.program_id from PROGRAM_OFFERED_BY pob,ENTITY_PROGRAM_MASTER p 
          where pob.offered_by=#offered_by# and pob.program_id=p.program_id;
</select>

	<resultMap id="resultbranch" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="branch_name" column="b.branch_name" />
		<result property="branch_code" column="b.branch_code" />
	</resultMap>

	<select id="branchNameListReport" resultMap="resultbranch">
		 select distinct b.branch_name,b.branch_code from PROGRAM_BRANCHES b,PROGRAM_OFFERED_BY pob
where b.branch_code=pob.branch and pob.program_id=#program_id# and offered_by=#offered_by#;
</select>

	<!-- Query for computed marks starts here -->
	<!-- First query to get registration number ,component etc -->
	<resultMap id="getBranchCountResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="count" column="count(distinct branch)" />
	</resultMap>

	<select id="getBranchCount" resultMap="getBranchCountResult">
		select count(distinct branch) from PROGRAM_OFFERED_BY where
		program_id=#program_id# and
		offered_by=#offered_by#
</select>

	<resultMap id="getBranchListResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="branch_code" column="branch" />
	</resultMap>

	<select id="getBranchList" resultMap="getBranchListResult">
		select distinct branch from
		PROGRAM_OFFERED_BY where
		program_id=#program_id# and
		offered_by=#offered_by#
</select>

	<resultMap id="getBranchCodeResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="branch_code" column="branch_code" />
	</resultMap>

	<select id="getBranchCode" resultMap="getBranchCodeResult">
		select distinct branch_code
		from PROGRAM_BRANCHES where
		branch_name=#branch_name#;
</select>

	<resultMap id="updatemarks" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="registration_number" column="s.registration_number" />
		<result property="component_id" column="s.component_id" />
		<result property="marks_percentage" column="s.marks_percentage" />
		<result property="board_id" column="s.board_id" />
	</resultMap>

	<select id="updateMarksList" resultMap="updatemarks">
		select distinct
		s.registration_number as registration_number,s.component_id
		as
		component_id,s.marks_percentage as marks_percentage,
		s.board_id as
		board_id
		from STUDENT_CALL_LIST s,PROGRAM_COMPONENTS p where
		s.program_id=#program_id# and s.entity_id=#entity_id#
		and
		s.branch_code=#branch_code# and p.type!=#type# and
		s.component_id=p.component_id and
		s.program_id=p.program_id and
		s.branch_code=p.branch_code and s.entity_id=p.offered_by
		and
		start_date>=#start_date# and end_date>=start_date and
		#end_date#>=end_date
		order by registration_number;
</select>


	<!-- update Studentcalllist -->
	<update id="updateCallList" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		update
		STUDENT_CALL_LIST set computed_Marks=#computed_Marks#
		,actual_computed_marks=#actual_computed_Marks#
		where
		program_id=#program_id# and branch_code=#branch_code# and
		entity_id=#entity_id# and component_id=#component_id# and
		registration_number=#registration_number# and
		start_date>=#start_date#
		and end_date>=start_date and #end_date#>=end_date; 
</update>

	<!-- get actualcomputed and computed marks -->
	<!-- get percentage according to component -->
	<resultMap id="getPercentage" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="component_Weightage" column="component_weightage" />
	</resultMap>

	<select id="getPercentageMarks" resultMap="getPercentage">
		select
		component_weightage from PROGRAM_COMPONENTS
		where
		program_id=#program_id# and component_id=#component_id# and
		type!=#type#
</select>

	<!-- get percentage according to Staff Ward -->
	<resultMap id="getStaffPercentage" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="weightage_percentage" column="weightage_percentage" />
	</resultMap>

	<select id="getStaffPercentageMarks" resultMap="getStaffPercentage">
		select
		weightage_percentage from SPECIAL_WEIGHTAGE where
		weightage_id=#weightage_id#
</select>

	<!-- get percentage according to Extra Weightage -->
	<resultMap id="getExtraPercentage" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="weightage_percentage" column="s.weightage_percentage" />
	</resultMap>

	<select id="getExtraPercentageMarks" resultMap="getExtraPercentage">
		select
		s.weightage_percentage from SPECIAL_WEIGHTAGE
		s,STUDENT_SPECIAL_WEIGHTAGE sw where
		s.weightage_id=sw.weightage_id and
		sw.registration_number=#registration_number# and
		sw.weightage_id=#weight_id#
		and sw.start_date>=#start_date# and
		sw.end_date>=sw.start_date and
		#end_date#>=sw.end_date;
         
</select>

	<resultMap id="checkStaffWard" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="weightage_id" column="weightage_id" />
	</resultMap>

	<select id="getCheckStaffWard" resultMap="checkStaffWard">
		select weightage_id
		from STUDENT_SPECIAL_WEIGHTAGE where
		registration_number=#registration_number#
		and start_date>=#start_date#
		and end_date>=start_date and
		#end_date#>=end_date;
</select>

	<resultMap id="checkStaff" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="weightage_id" column="weightage_id" />
	</resultMap>

	<select id="getCheckStaff" resultMap="checkStaff">
		select weightage_id from
		STUDENT_SPECIAL_WEIGHTAGE where
		registration_number=#registration_number#
		and start_date>=#start_date#
		and end_date>=start_date and
		#end_date#>=end_date;
</select>

	<resultMap id="checkComputeFlag" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="weightage_flag" column="weightage_flag" />
		<result property="special_weightage_flag" column="special_weightage_flag" />
	</resultMap>

	<select id="getCheckCompute" resultMap="checkComputeFlag">
		Select
		weightage_flag,special_weightage_flag FROM PROGRAM_COMPONENTS where
		program_id=#program_id# and offered_by=#offered_by#
		and
		branch_code=#branch_code# and component_id=#component_id#;
</select>

	<resultMap id="checkBoardFlag" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="board_flag" column="board_flag" />
	</resultMap>

	<select id="getcheckBoard" resultMap="checkBoardFlag">
		SELECT board_flag FROM
		PROGRAM_COMPONENTS where program_id=#program_id# and
		offered_by=#offered_by#
		and branch_code=#branch_code# and
		component_id=#component_id#;
</select>

	<resultMap id="getBoard" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="normalization_factor" column="normalization_factor" />
	</resultMap>

	<select id="getBoardPercentage" resultMap="getBoard">
		select
		normalization_factor from PROGRAM_BOARD where program_id=#program_id#
		and entity_id=#entity_id#
		and branch_code=#branch_code# and
		component_id=#component_id# and
		board=#board_id#;
</select>


	<resultMap id="getEligibleResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="component_eligiblity" column="cut_off_percentage" />
	</resultMap>
	<select id="getEligible" resultMap="getEligibleResult">
		select cut_off_percentage 
		from PROGRAM_COMPONENT_ELIGIBILITY where
		entity_Id=#entity_id# and
		program_id=#program_id# and branch_code=#branch_code# and
		category=#category# and
		component_id=#component_id#;
</select>

	<resultMap id="getCategoryResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="cos_value" column="cos_value" />
	</resultMap>
	<select id="getCategoryList" resultMap="getCategoryResult">
		select cos_value from
		STUDENT_REGISTRATION where
		registration_number=#registration_number#
		and start_date>=#start_date# and end_date>=start_date and
		#end_date#>=end_date;
</select>

	<resultMap id="getEligibleFlagResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="component_criteria_flag" column="component_criteria_flag" />
	</resultMap>
	<select id="getEligibleFlag" resultMap="getEligibleFlagResult">
		select
		component_criteria_flag from PROGRAM_COMPONENTS where
		program_id=#program_id# and offered_by=#offered_by#
		and
		branch_code=#branch_code# and component_id=#component_id#;
</select>

	<!-- for age -->
	<resultMap id="getEligibleAgeResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="age_eligibility" column="age_limit" />
	</resultMap>
	<select id="getEligibleAge" resultMap="getEligibleAgeResult">
		select age_limit
		from PROGRAM_AGE_ELIGIBILITY where
		program_id=#program_id# and
		entity_id=#entity_id# and branch_code=#branch_code# and
		category=#category#;
</select>


	<select id="getEligibleDate" resultClass="in.ac.dei.edrp.client.ReportInfoGetter">
		select
		datediff(#compare_date#,date_of_birth) as diff from ENTITY_STUDENT
		where
		student_id=(select student_id from STUDENT_REGISTRATION where
		registration_number=#registration_number#
		and start_date>=#start_date#
		and end_date>=start_date and
		#end_date#>=end_date)
		and
		category_code=#category#;
</select>

	<resultMap id="getComputeMarksResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="sum_computed_marks" column="sum(computed_marks)" />
		<result property="sum_actual_computed_marks" column="sum(actual_computed_marks)" />
	</resultMap>
	<select id="getComputeMarks" resultMap="getComputeMarksResult">
		select
		sum(computed_Marks) ,sum(actual_computed_marks) from
		STUDENT_CALL_LIST
		where program_id=#program_id#
		and entity_id=#entity_id# and
		branch_code=#branch_code# and
		registration_number=#registration_number# and
		start_date>=#start_date#
		and end_date>=start_date and #end_date#>=end_date;
</select>

	<update id="updateTestNumber" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		update
		STUDENT_TEST_NUMBER set
		sum_computed_marks=#sum_computed_marks#,sum_actual_computed_marks=#sum_actual_computed_marks#,reason_code=#reason_code#,status=#message#,cos_value=#cos_value#,called=#called#
		where entity_id=#entity_id# and program_id=#program_id# and
		branch_code=#branch_code# and
		registration_number=#registration_number#
		and start_date>=#start_date#
		and end_date>=start_date and
		#end_date#>=end_date;
</update>

	<insert id="insertTestNumber" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		insert into
		STUDENT_TEST_NUMBER
		(entity_id,program_id,branch_code,registration_number,cos_value,sum_computed_marks,sum_actual_computed_marks,reason_code,status,called,start_date,end_date)
		values
		(#entity_id#,#program_id#,#branch_code#,#registration_number#,#cos_value#,#sum_computed_marks#,#sum_actual_computed_marks#,#reason_code#,#message#,#called#,#start_date#,#end_date#); 
           
</insert>
	<!-- Query for computed marks ends -->

	<!-- update or insert values in control_report-->

	<!-- Query for Reset Flag -->
	<resultMap id="getResetFlagResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="flag_status" column="flag_status" />
	</resultMap>
	<select id="getResetFlag" resultMap="getResetFlagResult">
		select flag_status from
		CONTROL_REPORT where entity_id=#entity_id# and
		program_id=#program_id#
		and branch_code=#branch_code#
		and start_date>=#start_date# and
		end_date>=start_date and
		#end_date#>=end_date;
</select>
	<!-- query for reset flag ends -->

	<update id="updateControlReport" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		update
		CONTROL_REPORT set flag_status=#flag_status# where
		entity_id=#entity_id# and program_id=#program_id# and
		branch_code=#branch_code# and
		start_date>=#start_date# and
		end_date>=start_date and #end_date#>=end_date;
</update>

	<insert id="insertControlReport" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		insert into
		CONTROL_REPORT
		(entity_id,program_id,branch_code,flag_status,user_id,start_date,end_date)
		values
		(#entity_id#,#program_id#,#branch_code#,#flag_status#,#user_id#,#start_date#,#end_date#);
           
</insert>
	<!-- update or insert value in control_report ends -->
	<!-- Common query for entity_id,program_id -->
	<resultMap id="getReportEntityNameResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="entity_name" column="entity_name" />
	</resultMap>
	<select id="getReportEntityName" resultMap="getReportEntityNameResult">
		select entity_name from ENTITY_MASTER where entity_id=#entity_id# AND
		university_id=#university_id#;
</select>

	<resultMap id="getProgramNameResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="program_name" column="p.program_name" />
	</resultMap>
	<select id="getProgramName" resultMap="getProgramNameResult">
		select distinct
		p.program_name from PROGRAM_OFFERED_BY
		pob,ENTITY_PROGRAM_MASTER p
		where
		pob.offered_by=#offered_by# and pob.program_id=p.program_id and
		p.program_id=#program_id#;
</select>

	<resultMap id="getBranchNameResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="branch_name" column="branch_name" />
	</resultMap>
	<select id="getBranchName" resultMap="getBranchNameResult">
		select branch_name from
		PROGRAM_BRANCHES where branch_code=#branch_code# AND
		university_id=#university_id#;
</select>

	<resultMap id="getEntityIdResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="entity_id" column="entity_id" />
	</resultMap>
	<select id="getEntityId" resultMap="getEntityIdResult">
		select entity_id from
		ENTITY_MASTER where entity_name=#entity_name# AND
		university_id=#university_id#;
</select>

	<resultMap id="getProgramIdResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="program_id" column="p.program_id" />
	</resultMap>
	<select id="getProgramId" resultMap="getProgramIdResult">
		select distinct p.program_id
		from PROGRAM_OFFERED_BY
		pob,ENTITY_PROGRAM_MASTER p where
		pob.offered_by=#offered_by# and
		pob.program_id=p.program_id and
		p.program_name=#program_name#;
</select>
	<!-- Common query ends -->

	<!-- Generate Test number -->
	<resultMap id="getCityResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="city" column="city_name" />
	</resultMap>
	<select id="getCity" resultMap="getCityResult">
		select city_name from
		CITY_LOOK_UP where near_city=#maincity#;
</select>

	<resultMap id="getMainCityResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="value" column="value" />
	</resultMap>
	<select id="getMainCity" resultMap="getMainCityResult">
		select value from
		system_values where code=#code# and
		university_id=#university_id#;
</select>

	<resultMap id="countCategoryResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="count" column="count(distinct substr(cos_value,1,2))" />
	</resultMap>
	<select id="countCategory" resultMap="countCategoryResult">
		select count(distinct substr(cos_value,1,2)) from STUDENT_TEST_NUMBER where
		program_id=#program_id# and entity_id=#entity_id# and
		branch_code=#branch_code#;
</select>

	<resultMap id="getCategoryResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="category" column="substr(cos_value,1,2)" />
	</resultMap>
	<select id="getCategory" resultMap="getCategoryResult">
		select distinct substr(cos_value,1,2) from STUDENT_TEST_NUMBER where
		program_id=#program_id# and entity_id=#entity_id# and
		branch_code=#branch_code#;
</select>

	<resultMap id="getMaxNumberResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="max_test_number" column="max(substr(test_number,1,3))" />
	</resultMap>
	<select id="getMaxNumber" resultMap="getMaxNumberResult">
		select distinct
		max(substr(test_number,1,3)) from STUDENT_TEST_NUMBER
</select>

	<resultMap id="getRegistrationTestNumberResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="registration_number" column="s.registration_number" />
		<result property="city" column="sa.city" />
	</resultMap>
	<select id="getRegistrationTestNumber" resultMap="getRegistrationTestNumberResult">
		select distinct
		s.registration_number,s.program_id,s.branch_code,sa.city,sr.student_id,st.sum_computed_marks
		from STUDENT_CALL_LIST s,ADDRESSES_MASTER sa,STUDENT_REGISTRATION
		sr,ENTITY_STUDENT e,
		STUDENT_TEST_NUMBER st where
		s.program_id=#program_id# and s.branch_code=#branch_code#
		and
		s.entity_id=#entity_id# and e.category_code=#category# and
		st.called=#called# and
		e.student_id=sa.user_id
		and
		e.student_id=sr.student_id and
		s.registration_number=sr.registration_number and
		s.registration_number=st.registration_number
		and
		s.start_date>=#start_date# and s.end_date>=s.start_date and
		#end_date#>=s.end_date;
</select>

	<update id="updateRegTestNumber" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		update
		STUDENT_TEST_NUMBER s set s.test_number=#test_number# where
		s.program_id=#program_id# and
		s.branch_code=#branch_code# and
		s.entity_id=#entity_id# and
		s.registration_number=#registration_number#
		and
		s.start_date>=#start_date# and s.end_date>=s.start_date and
		#end_date#>=s.end_date;
</update>
	<!-- test number ends -->

	<!--First Excel starts here -->
	<resultMap id="getCosCountResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="count" column="count(distinct cos_value)" />
	</resultMap>
	<select id="getCosCount" resultMap="getCosCountResult">
	select count(distinct cos_value) from STUDENT_TEST_NUMBER where
	program_id=#program_id# and
	entity_id=#entity_id# and
	branch_code=#branch_code#
	and
	start_date>=#start_date# and end_date>=start_date and
	#end_date#>=end_date;
</select>

	<resultMap id="getCosValueResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="cos_value" column="cos_value" />
	</resultMap>
	<select id="getCosValue" resultMap="getCosValueResult">
		select distinct cos_value
		from STUDENT_TEST_NUMBER where
		program_id=#program_id# and
		entity_id=#entity_id# and
		branch_code=#branch_code#
		and
		start_date>=#start_date# and end_date>=start_date and
		#end_date#>=end_date;
</select>

	<resultMap id="getExcelRegistrationNumberResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="registration_number" column="st.registration_number" />
		<result property="sum_computed_marks" column="st.sum_computed_marks" />
	</resultMap>
	<select id="getExcelRegistrationNumber" resultMap="getExcelRegistrationNumberResult">
		select
		distinct st.registration_number,st.sum_computed_marks from
		STUDENT_TEST_NUMBER st where st.program_id=#program_id# AND
		st.entity_id=#entity_id# and
		st.branch_code=#branch_code# and
		st.cos_value=#cos_value# and st.status=#status#
		and
		st.start_date>=#start_date# and st.end_date>=st.start_date and
		#end_date#>=st.end_date
		order by st.sum_computed_marks desc;
</select>

	<resultMap id="getExcelComponentCountResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="count" column="count(distinct s.component_id)" />
	</resultMap>
	<select id="getExcelComponentCount" resultMap="getExcelComponentCountResult">
		select
		count(distinct s.component_id) from STUDENT_CALL_LIST
		s,PROGRAM_COMPONENTS p
		where
		s.registration_number=#registration_number# and
		s.program_id=#program_id# and s.branch_code=#branch_code#
		and
		entity_id=#entity_id# and p.type!=#flag# and
		s.component_id=p.component_id and s.program_id=p.program_id
		and
		s.entity_id=p.offered_by and s.branch_code=p.branch_code
		and
		s.start_date>=#start_date# and s.end_date>=s.start_date and
		#end_date#>=s.end_date;
</select>

	<resultMap id="getExcelComponentMarksValueResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="component_id" column="s.component_id" />
		<result property="marks_percentage" column="s.marks_percentage" />
		<result property="computed_Marks" column="s.computed_marks" />
		<result property="board_id" column="s.board_id" />
	</resultMap>
	<select id="getExcelComponentMarksValue" resultMap="getExcelComponentMarksValueResult">
		select
		s.component_id,s.marks_percentage,s.computed_marks,s.board_id from
		STUDENT_CALL_LIST s,PROGRAM_COMPONENTS p
		where
		s.registration_number=#registration_number# and
		s.program_id=#program_id# and s.branch_code=#branch_code#
		and
		entity_id=#entity_id# and p.type!=#flag# and
		s.component_id=p.component_id and s.program_id=p.program_id
		and
		s.entity_id=p.offered_by and s.branch_code=p.branch_code and
		s.start_date>=#start_date# and s.end_date>=s.start_date and
		#end_date#>=s.end_date
		order by s.component_id asc;
</select>

	<resultMap id="getBoardDescriptionResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="description" column="board_name" />
	</resultMap>
	<select id="getBoardDescription" resultMap="getBoardDescriptionResult">
		select board_name
		from BOARD_MASTER where board_id=#board_id#;
</select>


	<resultMap id="getRegistrationStudentIdResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="student_id" column="student_id" />
	</resultMap>
	<select id="getRegistrationStudentId" resultMap="getRegistrationStudentIdResult">
		select
		student_id from STUDENT_REGISTRATION where
		registration_number=#registration_number#
		and start_date>=#start_date#
		and end_date>=start_date and
		#end_date#>=end_date;
</select>

	<resultMap id="getRegistrationDetailsResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="first_name" column="s.first_name" />
		<result property="middle_name" column="s.middle_name" />
		<result property="last_name" column="s.last_name" />
		<result property="date_of_birth" column="s.date_of_birth" />
		<result property="category" column="s.category_code" />
		<result property="gender" column="s.gender" />
		<result property="city" column="st.city" />
	</resultMap>
	<select id="getRegistrationDetails" resultMap="getRegistrationDetailsResult">
		select
		s.first_name,s.middle_name,s.last_name,s.date_of_birth,s.category_code,s.gender,st.city
		from ENTITY_STUDENT s,ADDRESSES_MASTER st where
		s.student_id=#student_id# and s.student_id=st.user_id;
</select>

	<resultMap id="getCategoryDescriptionResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="description" column="category" />
	</resultMap>
	<select id="getCategoryDescription" resultMap="getCategoryDescriptionResult">
		select
		category from CATEGORY where code=#category#;
</select>

	<resultMap id="getCallMeritResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="cut_off_number" column="cut_off_number" />
	</resultMap>
	<select id="getCallMerit" resultMap="getCallMeritResult">
		select cut_off_number from
		CALL_CUT_OFF where branch_code=#branch_code# and
		program_id=#program_id#
		and offered_by=#offered_by# and
		cos_value=#cos_value#;
</select>

	<update id="updatecalledFlag" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		update
		STUDENT_TEST_NUMBER s set s.called=#called# where
		s.program_id=#program_id# and
		s.branch_code=#branch_code# and
		s.entity_id=#entity_id# and
		s.registration_number=#registration_number#
		and
		s.start_date>=#start_date# and s.end_date>=s.start_date and
		#end_date#>=s.end_date;
</update>

	<resultMap id="getugorpgResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="component_description" column="ug_pg" />
	</resultMap>
	<select id="getugorpg" resultMap="getugorpgResult">
		SELECT ug_pg FROM
		COMPONENT_DESCRIPTION where component_id=#component_id#;
</select>

	<resultMap id="getComponentDescriptionResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="component_description" column="description" />
	</resultMap>
	<select id="getComponentDescription" resultMap="getComponentDescriptionResult">
		SELECT
		description FROM COMPONENT_DESCRIPTION where
		component_id=#component_id#;
</select>

	<resultMap id="getUGComponentDescriptionResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="component_description" column="p.program_name" />
	</resultMap>
	<select id="getUGComponentDescription" resultMap="getUGComponentDescriptionResult">
		select
		p.program_name from ENTITY_PROGRAM_MASTER p where
		p.program_id=(select
		first_degree_code from STUDENT_FIRST_DEGREE where
		registration_number=#registration_number# and
		start_date>=#start_date#
		and end_date>=start_date and #end_date#>=end_date);
</select>
	<!-- First Excel ends here -->
	<!-- Second Excel starts here -->
	<resultMap id="getStudentTestNumberResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="registration_number" column="registration_number" />
		<result property="test_number" column="test_number" />
		<result property="sum_computed_marks" column="sum_computed_marks" />
	</resultMap>
	<select id="getStudentTestNumber" resultMap="getStudentTestNumberResult">
		select
		registration_number,test_number,sum_computed_marks from
		STUDENT_TEST_NUMBER where program_id=#program_id# and
		entity_id=#entity_id# and branch_code=#branch_code# and
		called=#called# and cos_value=#cos_value#
		and start_date>=#start_date#
		and end_date>=start_date and
		#end_date#>=end_date order by
		sum_computed_marks desc;
</select>
	<!-- Second excel ends here -->
	<!-- Final Merit List generation -->
	<resultMap id="getCountComponentDescriptionResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="count" column="count(description)" />
	</resultMap>
	<select id="getCountComponentDescription" resultMap="getCountComponentDescriptionResult">
		select
		count(description) from FINAL_MERIT_COMPONENTS where
		program_id=#program_id#
		and offered_by=#entity_id# and
		branch_code=#branch_code#;
</select>

	<resultMap id="getComponentDescriptionValueResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="component_description" column="description" />
	</resultMap>
	<select id="getComponentDescriptionValue" resultMap="getComponentDescriptionValueResult">
		select
		component_id,description from FINAL_MERIT_COMPONENTS where
		program_id=#program_id#
		and offered_by=#entity_id# and
		branch_code=#branch_code# order by
		component_id asc;
</select>

	<resultMap id="getFinalRegistrationNumberResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="registration_number" column="st.registration_number" />
		<result property="test_number" column="st.test_number" />
		<result property="sum_actual_computed_marks" column="st.sum_actual_computed_marks" />
		<result property="total_marks" column="sf.total_marks" />
	</resultMap>
	<select id="getFinalRegistrationNumber" resultMap="getFinalRegistrationNumberResult">
		select
		st.registration_number,st.test_number,st.sum_actual_computed_marks,sf.total_marks
		from STUDENT_TEST_NUMBER st,
		STUDENT_FINAL_MERIT_LIST sf where
		sf.program_id=#program_id# and sf.entity_id=#entity_id# and
		sf.branch_code=#branch_code# and sf.cos_value=#cos_value# and
		sf.registration_number=st.registration_number
		and
		sf.start_date>=#start_date# and sf.end_date>=sf.start_date and
		#end_date#>=sf.end_date;
</select>


	<resultMap id="getfinalmarksResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="component_id" column="evaluation_component" />
		<result property="attendance" column="attended" />
		<result property="marks" column="marks" />
	</resultMap>
	<select id="getfinalmarks" resultMap="getfinalmarksResult">
		select
		evaluation_component,marks,attended from STUDENT_FINAL_MARKS where
		registration_number=#registration_number# and entity_id=#entity_id#
		and program_id=#program_id# and branch_code=#branch_code#
		and
		start_date>=#start_date# and end_date>=start_date and
		#end_date#>=end_date
		order by evaluation_component asc;
</select>

	<resultMap id="getattendanceflagResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="attendance_flag" column="attendance_flag" />
		<result property="component_description" column="description" />
	</resultMap>
	<select id="getattendanceflag" resultMap="getattendanceflagResult">
		select
		attendance_flag,description from FINAL_MERIT_COMPONENTS where
		component_id=#component_id#;
</select>

	<resultMap id="getCosSeatsResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="cos_seat" column="cos_seats" />
	</resultMap>
	<select id="getCosSeats" resultMap="getCosSeatsResult">
		Select cos_seats FROM
		CALL_CUT_OFF c where offered_by=#offered_by# and
		program_id=#program_id# and branch_code=#branch_code# and
		cos_value=#cos_value#;
</select>

	<update id="updatestatusfinal" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		update
		STUDENT_FINAL_MERIT_LIST s set
		s.reason_code=#reason_code#,s.status=#status# where
		s.program_id=#program_id# and
		s.branch_code=#branch_code# and
		s.entity_id=#entity_id# and
		s.registration_number=#registration_number#
		and
		s.start_date>=#start_date# and s.end_date>=s.start_date and
		#end_date#>=s.end_date;
</update>

	<!-- Without Cast -->
	<resultMap id="getFinalRegistrationNumberWithStatusResult"
		class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="registration_number" column="st.registration_number" />
		<result property="test_number" column="st.test_number" />
		<result property="sum_actual_computed_marks" column="st.sum_actual_computed_marks" />
		<result property="total_marks" column="sf.total_marks" />
	</resultMap>
	<select id="getFinalRegistrationNumberWithStatus" resultMap="getFinalRegistrationNumberWithStatusResult">
		select
		st.registration_number,st.test_number,st.sum_actual_computed_marks,sf.total_marks
		from STUDENT_TEST_NUMBER st,
		STUDENT_FINAL_MERIT_LIST sf where
		sf.program_id=#program_id# and sf.entity_id=#entity_id# and
		sf.branch_code=#branch_code# and sf.cos_value=#cos_value# and
		sf.status=#status# and sf.registration_number=st.registration_number
		and sf.start_date>=#start_date# and sf.end_date>=sf.start_date and
		#end_date#>=sf.end_date
		order by sf.total_marks desc;
</select>
	<resultMap id="exportfinalmeritwithMFResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="registration_number" column="st.registration_number" />
		<result property="test_number" column="st.test_number" />
		<result property="sum_actual_computed_marks" column="st.sum_actual_computed_marks" />
		<result property="total_marks" column="sf.total_marks" />
		<result property="category" column="sf.cos_value" />
	</resultMap>
	<select id="exportfinalmeritwithMF" resultMap="exportfinalmeritwithMFResult">
		select st.registration_number,st.test_number,st.sum_actual_computed_marks,sf.cos_value,sf.total_marks 
		from STUDENT_TEST_NUMBER st,STUDENT_FINAL_MERIT_LIST sf where sf.program_id=#program_id# and sf.entity_id=#entity_id# and 
		sf.branch_code=#branch_code# and sf.cos_value like #cos_value# and sf.registration_number=st.registration_number and 
		sf.start_date>=#start_date# and sf.end_date>=sf.start_date and #end_date#>=sf.end_date 
		order by sf.total_marks desc;
</select>

	<resultMap id="getCosSeats1Result" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="cos_seat" column="cos_seats" />
	</resultMap>
	<select id="getCosSeats1" resultMap="getCosSeats1Result">
		select cos_seats from
		CALL_CUT_OFF c where offered_by=#offered_by# and
		program_id=#program_id# and branch_code=#branch_code# and cos_value like #cos_value#;
</select>
	<!-- with caste -->
	<!-- For UI grid while computing -->
	<resultMap id="getInEligibleStudentMarksResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="registration_number" column="registration_number" />
		<result property="sum_computed_marks" column="sum_computed_marks" />
		<result property="status" column="status" />
		<result property="reason_code" column="reason_code" />
	</resultMap>
	<select id="getInEligibleStudentMarks" resultMap="getInEligibleStudentMarksResult">
		select
		registration_number,sum_computed_marks,status,reason_code from
		STUDENT_TEST_NUMBER where entity_id=#entity_id# and
		program_id=#program_id# and branch_code=#branch_code# and
		start_date>=#start_date# and
		end_date>=start_date and
		#end_date#>=end_date order by sum_computed_marks desc;
</select>
	<resultMap id="getTotalCompLengthResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="count" column="count(distinct component_id)" />
	</resultMap>
	<select id="getTotalCompLength" resultMap="getTotalCompLengthResult">
		select count(distinct
		component_id) from PROGRAM_COMPONENTS p
		where p.program_id=#program_id#
		and p.branch_code=#branch_code#
		and p.offered_by=#offered_by# and
		p.type!=#flag# and
		p.weightage_flag=#weightage_flag#;
</select>

	<!-- UI ends while computing -->

	<!-- Starting excel upload starts -->
	<resultMap id="checkDuplicacyOfRegInStduentFinalResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="count" column="count(*)" />
	</resultMap>
	<select id="checkDuplicacyOfRegInStduentFinal" resultMap="checkDuplicacyOfRegInStduentFinalResult">
		SELECT count(*) FROM STUDENT_FINAL_MARKS where registration_number=#registration_number# and entity_id=#entity_id#
and program_id=#program_id# and branch_code=#branch_code# and evaluation_component=#component_id# and start_date>=#university_start_date# and 
end_date>=start_date and #university_end_date#>=end_date;
	</select>
	
	
	<insert id="insertStudentFinalMarks" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		insert into STUDENT_FINAL_MARKS  
		(program_id,entity_id,branch_code,registration_number,evaluation_component,
		marks,attended,start_date,end_date) 
		values 
		(#program_id#,#entity_id#,#branch_code#,#registration_number#,#component_id#,
		#marks_percentage#,#attendance#,#start_date#,#end_date#);
	</insert>
	
	<update id="updateStudentFinalMarks" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		update STUDENT_FINAL_MARKS  
		set marks=#marks_percentage#,attended=#attendance# 
		where registration_number=#registration_number# and entity_id=#entity_id#
	and program_id=#program_id# and branch_code=#branch_code# and evaluation_component=#component_id# and start_date>=#university_start_date# and 
	end_date>=start_date and #university_end_date#>=end_date;
	</update>

	<resultMap id="getFinalMeritEvaluationIdResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="component_id" column="component_id" />
		<result property="total_marks" column="total_marks" />
	</resultMap>
	<select id="getFinalMeritEvaluationId" resultMap="getFinalMeritEvaluationIdResult">
		select component_id,total_marks from 
		FINAL_MERIT_COMPONENTS where description=#component_description# and offered_by=#entity_id# 
		and program_id=#program_id# and branch_code=#branch_code#;
	</select>
	
<!--	<resultMap id="getStudentSessionDateResult" class="in.ac.dei.edrp.client.ReportInfoGetter">-->
<!--		<result property="start_date" column="start_date" />-->
<!--		<result property="end_date" column="end_date" />-->
<!--	</resultMap>-->
<!--	<select id="getStudentSessionDate" resultMap="getStudentSessionDateResult">-->
<!--		select start_date,end_date,cos from -->
<!--		STUDENT_TEST_NUMBER where called=#called# and registration_number=#registration_number# -->
<!--		and test_number=#test_number# and entity_id=#entity_id# -->
<!--		and program_id=#program_id# and branch_code=#branch_code# and start_date>=#university_start_date# and -->
<!--	end_date>=start_date and #university_end_date#>=end_date;-->
<!--	</select>-->

<resultMap id="getStudentSessionDateResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
        <result property="start_date" column="start_date" />
        <result property="end_date" column="end_date" />
        <result property="sum_actual_computed_marks" column="sum_actual_computed_marks" />
        <result property="cos_value" column="cos_value" />
    </resultMap>
    <select id="getStudentSessionDate" resultMap="getStudentSessionDateResult">
        select sum_actual_computed_marks,cos_value,start_date,end_date from
        STUDENT_TEST_NUMBER where called=#called# and registration_number=#registration_number#
        and test_number=#test_number# and entity_id=#entity_id#
        and program_id=#program_id# and branch_code=#branch_code# and start_date>=#university_start_date# and
    end_date>=start_date and #university_end_date#>=end_date;
  </select>
	
	<!-- Added for student final merit list ends -->
		<insert id="insertStudentFinalMeritList" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		insert into STUDENT_FINAL_MERIT_LIST  
		(program_id,entity_id,branch_code,registration_number,test_number,
		total_marks,cos_value,start_date,end_date) 
		values 
		(#program_id#,#entity_id#,#branch_code#,#registration_number#,#test_number#,
		#total_marks#,#cos_value#,#start_date#,#end_date#);
	</insert>
	
	<update id="updateStudentFinalMeritList" parameterClass="in.ac.dei.edrp.client.ReportInfoGetter">
		update STUDENT_FINAL_MERIT_LIST  
		set total_marks=#total_marks# 
		where test_number=#test_number# and registration_number=#registration_number# and entity_id=#entity_id#
	and program_id=#program_id# and branch_code=#branch_code# and start_date>=#university_start_date# and 
	end_date>=start_date and #university_end_date#>=end_date;
	</update>
	
	<resultMap id="getStudentinStudentFinalResult" class="in.ac.dei.edrp.client.ReportInfoGetter">
		<result property="count" column="count(registration_number)" />
	</resultMap>
	<select id="getStudentinStudentFinal" resultMap="getStudentinStudentFinalResult">
		select count(registration_number) from 
		STUDENT_FINAL_MERIT_LIST where registration_number=#registration_number# 
		and test_number=#test_number# and entity_id=#entity_id# 
		and program_id=#program_id# and branch_code=#branch_code# and start_date>=#university_start_date# and 
	end_date>=start_date and #university_end_date#>=end_date;
	</select>
	<!-- Added for student final merit list ends -->
	<!-- excel upload ends -->
</sqlMap>
