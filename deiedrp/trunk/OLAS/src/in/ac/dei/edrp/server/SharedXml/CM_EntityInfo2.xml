<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

  <sqlMap namespace="EntityInfo">   

  <typeAlias alias="EntityInfo" type="in.ac.dei.edrp.client.CM_entityInfoGetter"/>

 <resultMap id="EntityNameGetter" class="EntityInfo">

    <result property="entity_name" column="entity_name"/>
    <result property="entity_id" column="entity_id"/>
   
  </resultMap>
 
  <select id="getEntityName" resultMap="EntityNameGetter"> 
 	select entity_name,entity_id from  ENTITY_MASTER where university_id =#university_id# and entity_type=#entity_type#
  </select>
  
  <select id="getDefaultEntityName" resultMap="EntityNameGetter"> 
 	select entity_name,entity_id from  ENTITY_MASTER where university_id =#university_id# and entity_type=#entity_type#
  </select>
  
   <select id="getEntityNamefromID" resultMap="EntityNameGetter"> 
 	select entity_name,entity_id  from  ENTITY_MASTER where entity_id=#entity_id#
  </select>
  
  
 <resultMap id="EntityTypeGetter" class="EntityInfo">

    <result property="entity_type" column="entity_type"/>

  </resultMap>
 
  <select id="getEntityType" resultMap="EntityTypeGetter"> 
 	select entity_type from UNIVERSITY_ENTITY_TYPE where university_id =#university_id# and 
 	entity_description=#entity_description#
  </select>
  
     
 <insert id="insertaddressInfo">
	insert into ADDRESSES_MASTER values(

	null,
	#entity_id#,
	null,
	#address_line1#,
	#address_line2#,
	#city#,
	#state#,
	#pincode#,
	null,
	null,
	null,
	null,
	#insert_time#,
	null,
	#creator_id#,
	null
	);
  </insert>
  
   
   <resultMap id="stuAddressGetter" class="EntityInfo">

    <result property="address_line1" column="address_line1"/>
    <result property="address_line2" column="address_line2"/>
    <result property="city" column="city"/>
    <result property="state" column="state"/>
    <result property="pincode" column="pincode"/>
   
  </resultMap>
 
  <select id="GetStudentAddressInfo" resultMap="stuAddressGetter"> 
 
 SELECT * FROM ADDRESSES_MASTER where user_id=#user_id#

  </select>
  
  
  <resultMap id="enrolledStuAddressGetter" class="EntityInfo">

    <result property="address_line1" column="address_line_one"/>
    <result property="address_line2" column="address_line_two"/>
    <result property="city" column="city"/>
    <result property="state" column="state"/>
    <result property="pincode" column="pincode"/>
   
  </resultMap>
 
  <select id="GetEnrolledStudentAddressInfo" resultMap="enrolledStuAddressGetter"> 
 
 SELECT * FROM courseregistration.ADDRESSES_MASTER where user_id=#user_id#

  </select>
  
  
      
 <update id="updateaddressInfo"> 
 update ADDRESSES_MASTER set 
 								address_line1=#address_line1#,
 								address_line2=#address_line2#,
 								city=#city#,
 								state=#state#,
 								pincode=#pincode#,
 								modification_time=#modification_time#,
                                modifier_id=#modifier_id#
 								
 								
 							where user_id=#entity_id#
 						
  </update>
  
  
  
 <resultMap id="StudentValueGetter" class="EntityInfo">

    <result property="value" column="value"/>
   
  </resultMap>
 
  <select id="getStudentValue" resultMap="StudentValueGetter"> 
 	select value from SYSTEM_VALUES where university_id =#university_id# and code=#code#
  </select>
  
 <resultMap id="EntIdGetter" class="EntityInfo">

    <result property="entity_id" column="entity_id"/>
   
  </resultMap>
 
  <select id="getEntId" resultMap="EntIdGetter"> 
 	select entity_id from ENTITY_MASTER where university_id =#university_id# and entity_name=#entity_name#
  </select>
  
   <select id="getEntId1" resultMap="EntIdGetter"> 
 	select entity_id from ENTITY_MASTER where entity_name=#entity_name#
  </select>
  
  <update id="updateStudentValue"> 
 update SYSTEM_VALUES set value=#value# where code=#code#
 						
  </update>
  
   
  <resultMap id="sessiondate" class="EntityInfo">

    <result property="startdate" column="start_date"/>
    <result property="enddate" column="end_date"/>

  </resultMap>
 
  <select id="Getsessiondate" resultMap="sessiondate"> 
  SELECT start_date, end_date FROM UNIVERSITY where university_id IN (select university_id from ENTITY_MASTER where 
  entity_id=#entity_id#)

  </select>  
  
  
  
  <resultMap id="EntityDescGetter" class="EntityInfo">

    <result property="entity_description" column="entity_description"/>
    <result property="entity_type" column="entity_type"/>

  </resultMap>
 
  <select id="getEntityDesc" resultMap="EntityDescGetter"> 
 	select entity_description,entity_type from UNIVERSITY_ENTITY_TYPE where  university_id =#university_id# 
  </select>
  
  <select id="getDefaultEntityDesc" resultMap="EntityDescGetter"> 
 	select entity_description,entity_type from UNIVERSITY_ENTITY_TYPE where  university_id =#university_id# and entity_type='INS'
  </select>
  
  
  <resultMap id="getDefaultEntityValue" class="EntityInfo">
		<result property="value" column="value" />
  </resultMap>
	<select id="checkForDefaultEntity" resultMap="getDefaultEntityValue">
		select value from
		SYSTEM_VALUES where code=#code# and	university_id=#university_id#;
  </select>   
 
</sqlMap>

