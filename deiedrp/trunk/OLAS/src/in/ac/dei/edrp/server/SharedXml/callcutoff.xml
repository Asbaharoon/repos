<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE sqlMap
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"http://www.ibatis.com/dtd/sql-map-2.dtd">


<sqlMap namespace="callcutoff">

	<typeAlias alias="callcutoff" type="in.ac.dei.edrp.client.CM_ProgramInfoGetter" />

	<insert id="insertcutoffdetails">
		insert into
		CALL_CUT_OFF(program_id,branch_code,Offered_by,cos_value,cos_seats,number_of_times,number_of_times_active,cut_off_number,cut_off_number_active,cut_off_percentage,cut_off_percentage_active,settings,session_start_date,session_end_date,insert_time,creator_id)
		values(#program_id#,#branch_code#,#entity_id#,#cos_value#,#no_of_seats#,#no_of_times#,#no_of_times_active#,#cut_off_number#,#cut_off_number_active#,#cut_off_percentage#,#cut_off_percentage_active#,#settings#,#session_start_date#,#session_end_date#,#insert_time#,#creator_id#)

</insert>

	<resultMap id="getcall" class="callcutoff">

		<result property="program_name" column="program_name" />
		<result property="branch_name" column="branch_name" />
		<result property="cos_value" column="cos_value" />
		<result property="no_of_times" column="number_of_times" />
		<result property="no_of_seats" column="cos_seats" />
		<result property="session_start_date" column="session_start_date" />
		<result property="session_end_date" column="session_end_date" />

	</resultMap>


	<select id="callwithentityname" resultMap="getcall">
		select distinct
		epm.program_name,pbs.branch_name,cco.cos_value,cco.number_of_times,cco.cos_seats,cco.session_start_date,cco.session_end_date
		from ENTITY_PROGRAM_MASTER epm,PROGRAM_OFFERED_BY pob,CALL_CUT_OFF
		cco,PROGRAM_BRANCHES pbs,UNIVERSITY_ENTITY_TYPE uet,ENTITY_MASTER em
		where pob.program_id=cco.program_id AND pob.branch=cco.branch_code AND
		cco.branch_code=pbs.branch_code AND epm.program_id=pob.program_id AND
		pob.offered_by=em.entity_id AND em.entity_type=uet.entity_type AND
		em.university_id=uet.university_id AND
		uet.university_id=pbs.university_id AND em.entity_name=#entity_name#
		AND cco.settings=#settings# AND uet.university_id=#university_id#; 
</select>



	<select id="callwithentitytype" resultMap="getcall">
		select distinct
		epm.program_name,pbs.branch_name,cco.cos_value,cco.number_of_times,cco.cos_seats,cco.session_start_date,cco.session_end_date
		from ENTITY_PROGRAM_MASTER epm,PROGRAM_OFFERED_BY pob,CALL_CUT_OFF
		cco,PROGRAM_BRANCHES pbs,ENTITY_MASTER em,UNIVERSITY_ENTITY_TYPE uet
		where pob.program_id=cco.program_id AND epm.program_id=pob.program_id
		AND pob.branch=cco.branch_code AND cco.branch_code=pbs.branch_code AND
		pob.offered_by=em.entity_id AND em.entity_type=uet.entity_type AND
		em.university_id=uet.university_id AND
		uet.university_id=pbs.university_id AND
		uet.entity_description=#entity_type# AND cco.settings=#settings# AND
		uet.university_id=#university_id# order by pob.program_id;
</select>



	<select id="callwithallvalues" resultMap="getcall">
		select distinct
		epm.program_name,pbs.branch_name,cco.cos_value,cco.number_of_times,cco.cos_seats,cco.session_start_date,cco.session_end_date
		from ENTITY_PROGRAM_MASTER epm,PROGRAM_OFFERED_BY pob,CALL_CUT_OFF
		cco,PROGRAM_BRANCHES pbs,UNIVERSITY_ENTITY_TYPE uet,ENTITY_MASTER em
		where epm.program_id=cco.program_id AND cco.program_id=pob.program_id
		AND pbs.branch_code=cco.branch_code AND cco.branch_code=pob.branch AND
		pob.offered_by=em.entity_id AND em.entity_type=uet.entity_type AND
		em.university_id=uet.university_id AND
		uet.university_id=pbs.university_id AND
		epm.program_name=#program_name# AND
		cco.settings=#settings# AND
		uet.university_id=#university_id#;
</select>

	<resultMap id="cosvaluegfgf" class="callcutoff">

		<result property="cos_value" column="cos_value" />

	</resultMap>

	<select id="getcosvalue" resultMap="cosvaluegfgf">

		select cos_value from
		CALL_CUT_OFF
		where program_id=#program_id# AND
		branch_code=#branch_code# AND
		Offered_by=#entity_id#; 
		
</select>


	<update id="updatewithentitytype">
		update CALL_CUT_OFF cco,UNIVERSITY_ENTITY_TYPE
		uet,PROGRAM_BRANCHES pbs SET
		cco.cos_value=#cos_value#,cco.number_of_times=#no_of_times#,cco.cos_seats=#no_of_seats#,
		cco.session_start_date=#session_start_date#,cco.session_end_date=#session_end_date#,
		cco.modification_time=#modification_time#,cco.modifier_id=#modifier_id#
		where
		cco.program_id
		IN(select
		program_id from ENTITY_PROGRAM_MASTER
		where
		program_name=#program_name#) AND cco.branch_code=pbs.branch_code
		AND pbs.branch_name=#branch_name# AND
		cco.cos_value=#cos_value# AND
		uet.university_id=pbs.university_id AND
		uet.university_id=#university_id#;
		
</update>


	<delete id="deleterecord">

		delete cco from CALL_CUT_OFF AS
		cco,ENTITY_PROGRAM_MASTER AS epm,PROGRAM_BRANCHES
		pbs,UNIVERSITY_ENTITY_TYPE AS uet where
		cco.program_id=epm.program_id
		AND epm.program_name=#program_name#
		AND
		cco.cos_value=#cos_value# AND
		cco.branch_code=pbs.branch_code AND
		pbs.university_id=uet.university_id AND
		pbs.branch_name=#branch_name#
		AND
		uet.university_id=#university_id#;

</delete>

	<resultMap id="getdefaultdetails" class="callcutoff">

		<result property="defaultseats" column="seats" />
		<result property="category" column="category_code" />
		<result property="percentage_seats" column="percentage_seats" />

	</resultMap>

	<select id="defaultdetails" resultMap="getdefaultdetails">

		select distinct
		pob.seats,psr.category_code,psr.percentage_seats from
		PROGRAM_OFFERED_BY
		pob,PROGRAM_SEAT_RESERVATION psr where
		pob.program_id=psr.program_id
		AND pob.program_id=#program_id# AND
		pob.offered_by=#entity_id# AND
		pob.branch=#branch_code#;

</select>

	<insert id="insertdefaultdetails">

		insert into
		CALL_CUT_OFF(program_id,branch_code,Offered_by,cos_value,cos_seats,number_of_times,number_of_times_active,cut_off_number,cut_off_number_active,cut_off_percentage,cut_off_percentage_active,settings,session_start_date,session_end_date,insert_time,creator_id)
		values(#program_id#,#branch_code#,#entity_id#,#cos_value#,#defaultseats#,#no_of_times#,#no_of_times_active#,#cut_off_number#,#cut_off_number_active#,#cut_off_percentage#,#cut_off_percentage_active#,#settings#,#session_start_date#,#session_end_date#,#insert_time#,#creator_id#)


</insert>

	<resultMap id="getsections" class="callcutoff">

		<result property="program_id" column="program_id" />
		<result property="program_name" column="program_name" />
		<result property="entity_id" column="entity_id" />
		<result property="branch_name" column="branch_name" />
		<result property="branch" column="branch" />

	</resultMap>

	<select id="methodgetprograms" resultMap="getsections">

		select distinct
		epm.program_id,epm.program_name,em.entity_id,pob.branch,pbs.branch_name
		from ENTITY_PROGRAM_MASTER epm,PROGRAM_OFFERED_BY pob,ENTITY_MASTER
		em,PROGRAM_BRANCHES pbs,UNIVERSITY_ENTITY_TYPE uet where
		epm.program_id=pob.program_id AND em.entity_id=pob.offered_by AND
		pob.branch=pbs.branch_code AND pob.offered_by=em.entity_id AND
		em.entity_type=uet.entity_type AND em.university_id=uet.university_id
		AND uet.university_id=pbs.university_id AND
		uet.entity_description=#entity_description# AND
		uet.university_id=#university_id#;

</select>

	<resultMap id="cosvalue" class="callcutoff">

		<result property="cos_value" column="cos_code" />

	</resultMap>

	<select id="getcos_codess" resultMap="cosvalue">

		select cos_code from
		PROGRAM_COS_CODE where program_id=#program_id# AND
		branch_code=#branch_code#;
</select>

	<resultMap id="cosvaluea" class="callcutoff">

		<result property="no_of_seats" column="seats" />

	</resultMap>

	<select id="gettotalseats" resultMap="cosvaluea">

		select seats from
		PROGRAM_OFFERED_BY where program_id=#program_id# AND
		branch=#branch_code# AND offered_by=#entity_description#;
</select>

	<resultMap id="cosseats" class="callcutoff">

		<result property="no_of_seats" column="coss_seats" />

	</resultMap>

	<select id="getcosseats" resultMap="cosseats">

		select sum(cos_seats)
		coss_seats from
		CALL_CUT_OFF where program_id=#program_id# AND
		branch_code=#branch_code# AND offered_by=#entity_description#;
</select>

	<resultMap id="cosseats" class="callcutoff">

		<result property="no_of_seats" column="coss_seats" />

	</resultMap>

	<select id="getseatsfromcco" resultMap="cosseats">

		select sum(distinct
		cos_seats)
		coss_seats from CALL_CUT_OFF cco,UNIVERSITY_ENTITY_TYPE
		uet,ENTITY_PROGRAM_MASTER epm,PROGRAM_BRANCHES pbs where
		cco.program_id = epm.program_id AND epm.program_name=#program_name#
		AND cco.branch_code = pbs.branch_code AND
		pbs.branch_name=#branch_name# AND cco.cos_value!=#cos_value# AND
		uet.university_id=#university_id#;
</select>

	<resultMap id="cosseatss" class="callcutoff">

		<result property="no_of_seats" column="seats" />

	</resultMap>

	<select id="getseatsfrompob" resultMap="cosseatss">

		select seats from
		PROGRAM_OFFERED_BY pob,ENTITY_PROGRAM_MASTER epm,PROGRAM_BRANCHES pbs
		where
		pob.program_id=epm.program_id AND epm.program_name=#program_name#
		AND
		pob.branch=pbs.branch_code AND
		pbs.branch_name=#branch_name#;
</select>




	<!--
		**************************************queries for program components
		begins here**************************************************
	-->

	<resultMap id="programmaster" class="callcutoff">

		<result property="program_name" column="program_name" />
		<result property="program_id" column="program_id" />

	</resultMap>
	<select id="fromprogrammaster" resultMap="programmaster">
		select distinct
		program_name,program_id from ENTITY_PROGRAM_MASTER
		epm,UNIVERSITY_ENTITY_TYPE uet where epm.program_id !=#program_id# AND
		substring(epm.program_id,1,4)=uet.university_id AND
		uet.university_id=#university_id#;
    </select>


	<resultMap id="rule" class="callcutoff">

		<result property="description" column="description" />
		<result property="rule_no" column="rule_number" />

	</resultMap>
	<select id="description" resultMap="rule">
		select
		rule_number,description
		from COMPONENT_RULES
    </select>

	<!--
		<resultMap id="getcomponentwithentitytype" class="callcutoff"> <result
		property="program_id" column="program_id" /> <result
		property="branch_code" column="branch_code" /> <result
		property="entity_id" column="offered_by" /> <result
		property="component" column="component_id" /> <result
		property="weightage" column="component_weightage" /> <result
		property="weightage_flag" column="weightage_flag" /> <result
		property="eligibility_flag" column="component_criteria_flag" />
		<result property="special_flag" column="special_weightage_flag" />
		<result property="eligibility_flag" column="component_criteria_flag"
		/> <result property="sequence" column="sequence_number" /> <result
		property="board_flag" column="board_flag" /> <result
		property="rule_no" column="rule_number" /> <result property="UGorPG"
		column="ug_pg" /> <result property="insert_time" column="insert_time"
		/> </resultMap>
	-->
	<insert id="insertcomponentdetails">

		insert into
		PROGRAM_COMPONENTS(program_id,branch_code,offered_by,component_id,type,component_weightage,weightage_flag,component_criteria_flag,special_weightage_flag,sequence_number,board_flag,rule_number,ug_pg,insert_time,creator_id)
		values(#program_id#,#branch_code#,#entity_id#,#component#,#type#,#weightage#,#weightage_flag#,#eligibility_flag#,#special_flag#,#sequence#,#board_flag#,#rule_no#,#UGorPG#,#insert_time#,#creator_id#);

</insert>

	<resultMap id="getcomponentwithentitytype" class="callcutoff">

		<result property="program_name" column="program_name" />
		<result property="branch_name" column="branch_name" />
		<result property="component" column="des" />
		<result property="type" column="type" />
		<result property="entity_id" column="component_weightage" />
		<result property="board_flag" column="board_flag" />
		<result property="weightage_flag" column="weightage_flag" />
		<result property="special_flag" column="special_weightage_flag" />
		<result property="eligibility_flag" column="component_criteria_flag" />
		<result property="sequence" column="sequence_number" />
		<result property="description" column="description" />
		<result property="rule_no" column="rule_number" />


	</resultMap>

	<select id="componentwithentitytype" resultMap="getcomponentwithentitytype">

		select distinct
		epm.program_name,pbs.branch_name,cd.description
		des,pcs.type,pcs.component_weightage,pcs.board_flag,pcs.weightage_flag,pcs.special_weightage_flag,pcs.component_criteria_flag,pcs.sequence_number,cr.description,cr.rule_number
		from ENTITY_PROGRAM_MASTER epm,PROGRAM_COMPONENTS pcs,COMPONENT_RULES
		cr,PROGRAM_OFFERED_BY pob,PROGRAM_BRANCHES pbs,ENTITY_MASTER
		em,COMPONENT_DESCRIPTION cd,UNIVERSITY_ENTITY_TYPE uet where
		epm.program_id=pob.program_id AND epm.program_id=pcs.program_id AND
		cr.rule_number=pcs.rule_number AND pob.branch=pcs.branch_code AND
		pcs.branch_code=pbs.branch_code AND pcs.component_id=cd.component_id
		AND pob.offered_by=em.entity_id AND em.entity_type=uet.entity_type AND
		em.university_id=uet.university_id AND
		uet.university_id=pbs.university_id AND
		cd.university_id=uet.university_id AND
		uet.entity_description=#entity_description#
		AND
		uet.university_id=#university_id# order by pob.program_id;

</select>

	<delete id="deletecomponents">

		delete cco from PROGRAM_COMPONENTS AS
		cco,ENTITY_PROGRAM_MASTER AS
		epm,PROGRAM_BRANCHES AS
		pbs,COMPONENT_DESCRIPTION AS cd,UNIVERSITY_ENTITY_TYPE AS uet where
		cco.program_id=epm.program_id AND
		cco.branch_code=pbs.branch_code AND
		cco.component_id=cd.component_id
		AND
		pbs.university_id=uet.university_id AND
		cd.university_id=uet.university_id AND
		epm.program_name=#program_name#
		AND
		pbs.branch_name=#branch_name# AND
		uet.university_id=#university_id#
		AND
		cd.description=#component#; 
		
</delete>

	<!--
		<resultMap id="getcomponentwithentityname" class="callcutoff"> <result
		property="program_name" column="program_name" /> <result
		property="branch_name" column="branch_name" /> <result
		property="component" column="component_id" /> <result property="type"
		column="type" /> <result property="weightage"
		column="component_weightage" /> <result property="board_flag"
		column="board_flag" /> <result property="weightage_flag"
		column="weightage_flag" /> <result property="special_flag"
		column="special_weightage_flag" /> <result property="eligibility_flag"
		column="component_criteria_flag" /> <result property="sequence"
		column="sequence_number" /> <result property="description"
		column="description" /> </resultMap>
	-->
	<select id="componentwithentityname" resultMap="getcomponentwithentitytype">

		select distinct
		epm.program_name,pbs.branch_name,cd.description
		des,pcs.type,pcs.component_weightage,pcs.board_flag,pcs.weightage_flag,pcs.special_weightage_flag,pcs.component_criteria_flag,pcs.sequence_number,cr.description,cr.rule_number
		from ENTITY_PROGRAM_MASTER epm,PROGRAM_COMPONENTS pcs,COMPONENT_RULES
		cr,PROGRAM_OFFERED_BY pob,PROGRAM_BRANCHES pbs,ENTITY_MASTER
		em,COMPONENT_DESCRIPTION cd,UNIVERSITY_ENTITY_TYPE uet where
		epm.program_id=pob.program_id AND epm.program_id=pcs.program_id AND
		cr.rule_number=pcs.rule_number AND pob.branch=pcs.branch_code AND
		pcs.branch_code=pbs.branch_code AND pcs.component_id=cd.component_id
		AND pob.offered_by=em.entity_id AND em.entity_type=uet.entity_type AND
		em.university_id=uet.university_id AND
		cd.university_id=uet.university_id AND
		uet.university_id=pbs.university_id AND em.entity_name=#entity_name#
		AND uet.university_id=#university_id# order by pob.program_id; 

</select>

	<!--
		<resultMap id="getcomponentwithallvalues" class="callcutoff"> <result
		property="program_name" column="program_name" /> <result
		property="branch_name" column="branch_name" /> <result
		property="component" column="component_id" /> <result property="type"
		column="type" /> <result property="weightage"
		column="component_weightage" /> <result property="board_flag"
		column="board_flag" /> <result property="weightage_flag"
		column="weightage_flag" /> <result property="special_flag"
		column="special_weightage_flag" /> <result property="eligibility_flag"
		column="component_criteria_flag" /> <result property="sequence"
		column="sequence_number" /> <result property="description"
		column="description" /> </resultMap>
	-->
	<select id="componentwithallvalues" resultMap="getcomponentwithentitytype">

		select distinct
		epm.program_name,pbs.branch_name,cd.description
		des,pcs.type,pcs.component_weightage,pcs.board_flag,pcs.weightage_flag,pcs.special_weightage_flag,pcs.component_criteria_flag,
		pcs.sequence_number,cr.description,cr.rule_number from
		ENTITY_PROGRAM_MASTER epm,PROGRAM_COMPONENTS pcs,COMPONENT_RULES
		cr,PROGRAM_OFFERED_BY pob,PROGRAM_BRANCHES pbs,COMPONENT_DESCRIPTION
		cd,ENTITY_MASTER em,UNIVERSITY_ENTITY_TYPE
		uet where
		epm.program_id=pob.program_id AND
		epm.program_id=pcs.program_id AND
		cr.rule_number=pcs.rule_number AND
		pob.branch=pcs.branch_code AND
		pcs.branch_code=pbs.branch_code AND
		pcs.component_id=cd.component_id
		AND pob.offered_by=em.entity_id AND
		em.entity_type=uet.entity_type AND
		em.university_id=uet.university_id
		AND
		uet.university_id=pbs.university_id AND
		cd.university_id=uet.university_id AND
		epm.program_name=#program_name#
		AND uet.university_id=#university_id#
		order by
		pob.program_id;

</select>

	<resultMap id="component" class="callcutoff">

		<result property="component_id" column="component_id" />

	</resultMap>

	<select id="getcomponents" resultMap="component">
		select component_id
		from
		PROGRAM_COMPONENTS where
		program_id=#program_id# AND
		branch_code=#branch_code#;
</select>

	<resultMap id="sequence" class="callcutoff">

		<result property="sequence" column="sequence_number" />

	</resultMap>

	<select id="getsequencenumber" resultMap="sequence">
		select
		sequence_number
		from PROGRAM_COMPONENTS where
		program_id=#program_id#
		AND
		branch_code=#branch_code#;
</select>

	<resultMap id="getcomponwent" class="callcutoff">

		<result property="description" column="description" />
		<result property="component" column="component_id" />

	</resultMap>

	<select id="getcomponentdescription" resultMap="getcomponwent">

		select
		component_id,description from COMPONENT_DESCRIPTION where
		university_id=#String#;

</select>

	<update id="updateprogramcomponents">
		update PROGRAM_COMPONENTS pcs,UNIVERSITY_ENTITY_TYPE
		uet,PROGRAM_BRANCHES pbs SET
		pcs.type=#type#,pcs.component_weightage=#weightage#,pcs.weightage_flag=#weightage_flag#,pcs.component_criteria_flag=#eligibility_flag#,pcs.special_weightage_flag=#special_flag#,pcs.board_flag=#board_flag#,pcs.rule_number=#rule_no#,pcs.modification_time=#modification_time#,pcs.modifier_id=#modifier_id#
		where pcs.program_id IN(select program_id from ENTITY_PROGRAM_MASTER
		where program_name=#program_name#) AND pcs.branch_code=pbs.branch_code
		AND pbs.branch_name=#branch_name# AND pcs.sequence_number=#sequence#
		AND uet.university_id=pbs.university_id AND
		uet.university_id=#university_id#;;
		
</update>



	<!--
		**************************************queries for final merit
		components begins
		here**************************************************
	-->

	<resultMap id="maxi" class="callcutoff">

		<result property="program_id" column="program_id" />
	</resultMap>


	<select id="getrecordsfromfinalmerit" resultMap="maxi">
		select
		program_id from
		FINAL_MERIT_COMPONENTS where
		program_id=#program_id# AND
		branch_code=#branch_code#;
</select>

	<resultMap id="maxid" class="callcutoff">

		<result property="component" column="component_id" />
	</resultMap>

	<select id="getmaxfromfinalmerit" resultMap="maxid">
		select
		MAX(component_id) component_id from
		FINAL_MERIT_COMPONENTS where
		program_id=#program_id# AND branch_code=#branch_code#;
</select>

	<insert id="insertfinalmerit">

		insert into
		FINAL_MERIT_COMPONENTS(program_id,branch_code,offered_by,component_id,attendance_flag,description,total_marks,insert_time,creator_id)
		values(#program_id#,#branch_code#,#entity_id#,#component#,#eligibility_flag#,#description#,#total_marks#,#insert_time#,#creator_id#);

</insert>

	<resultMap id="desc" class="callcutoff">

		<result property="description" column="description" />
	</resultMap>

	<select id="getdescription" resultMap="desc">
		select
		description from
		FINAL_MERIT_COMPONENTS where
		program_id=#program_id# AND
		branch_code=#branch_code#;
</select>




	<delete id="deletefromfinalmerit">

		delete cco from FINAL_MERIT_COMPONENTS AS
		cco,PROGRAM_BRANCHES AS pbs,UNIVERSITY_ENTITY_TYPE AS
		uet,ENTITY_PROGRAM_MASTER AS epm where cco.program_id=epm.program_id
		AND cco.branch_code=pbs.branch_code AND
		pbs.university_id=uet.university_id AND
		epm.program_name=#program_name# AND pbs.branch_name=#branch_name# AND
		cco.description=#component# AND
		uet.university_id=#university_id#;
		
</delete>

	<update id="updatemeritcomponents">
		update FINAL_MERIT_COMPONENTS
		fmc,UNIVERSITY_ENTITY_TYPE uet,PROGRAM_BRANCHES pbs SET
		fmc.attendance_flag=#board_flag#,fmc.total_marks=#weightage#,
		fmc.modification_time=#modification_time#,fmc.modifier_id=#modifier_id#
		where fmc.program_id IN(select program_id from ENTITY_PROGRAM_MASTER
		where program_name=#program_name#) AND fmc.branch_code=pbs.branch_code
		AND pbs.branch_name=#branch_name# AND fmc.description=#component#;
		
</update>

	<update id="updatefinalmerit">
		update FINAL_MERIT_COMPONENTS SET
		component_id=#component#,description=#description#,total_marks=#total_marks#,
		modification_time=#modification_time#
		where
		university_id=#university_id# AND component_id=#component#;
		
</update>

	<resultMap id="finalmeritwithentitytype" class="callcutoff">

		<result property="program_name" column="program_name" />
		<result property="branch_name" column="branch_name" />
		<result property="weightage" column="total_marks" />
		<result property="board_flag" column="attendance_flag" />
		<result property="description" column="description" />


	</resultMap>

	<select id="meritwithentitytype" resultMap="finalmeritwithentitytype">

		select distinct
		epm.program_name,pbs.branch_name,fmc.attendance_flag,fmc.description,fmc.total_marks
		from ENTITY_PROGRAM_MASTER epm,FINAL_MERIT_COMPONENTS
		fmc,PROGRAM_OFFERED_BY pob,PROGRAM_BRANCHES pbs,ENTITY_MASTER
		em,UNIVERSITY_ENTITY_TYPE uet where epm.program_id=pob.program_id AND
		epm.program_id=fmc.program_id AND pob.branch=fmc.branch_code AND
		fmc.branch_code=pbs.branch_code AND pob.offered_by=em.entity_id AND
		em.entity_type=uet.entity_type AND em.university_id=uet.university_id
		AND uet.university_id=pbs.university_id AND
		em.entity_type=uet.entity_type AND
		entity_description=#entity_description# AND
		uet.university_id=#university_id# order by pob.program_id;

</select>



	<select id="meritwithentityname" resultMap="finalmeritwithentitytype">

		select distinct
		epm.program_name,pbs.branch_name,fmc.attendance_flag,fmc.description,fmc.total_marks
		from ENTITY_PROGRAM_MASTER epm,FINAL_MERIT_COMPONENTS
		fmc,PROGRAM_OFFERED_BY pob,PROGRAM_BRANCHES pbs,ENTITY_MASTER
		em,UNIVERSITY_ENTITY_TYPE uet where epm.program_id=pob.program_id AND
		epm.program_id=fmc.program_id AND pob.branch=fmc.branch_code AND
		fmc.branch_code=pbs.branch_code AND pob.offered_by =em.entity_id AND
		em.entity_type=uet.entity_type AND em.university_id=uet.university_id
		AND uet.university_id=pbs.university_id AND
		em.entity_name=#entity_name#
		AND uet.university_id=#university_id#
		order by pob.program_id;

</select>


	<select id="meritwithprogramname" resultMap="finalmeritwithentitytype">

		select distinct
		epm.program_name,pbs.branch_name,fmc.attendance_flag,fmc.description,fmc.total_marks
		from ENTITY_PROGRAM_MASTER epm,FINAL_MERIT_COMPONENTS
		fmc,PROGRAM_OFFERED_BY pob,PROGRAM_BRANCHES pbs,UNIVERSITY_ENTITY_TYPE
		uet,ENTITY_MASTER em where epm.program_id=pob.program_id AND
		epm.program_id=fmc.program_id AND pob.branch=fmc.branch_code AND
		fmc.branch_code=pbs.branch_code AND pob.offered_by=em.entity_id AND
		em.entity_type=uet.entity_type AND em.university_id=uet.university_id
		AND uet.university_id=pbs.university_id AND
		epm.program_name=#program_name# AND uet.university_id=#university_id#
		order by pob.program_id;

</select>

	<resultMap id="getsectionss" class="callcutoff">

		<result property="program_id" column="program_id" />
		<result property="program_name" column="program_name" />
		<result property="entity_id" column="entity_id" />


	</resultMap>

	<select id="methodgetprogramss" resultMap="getsectionss">

		select distinct
		epm.program_id,epm.program_name,em.entity_id from
		ENTITY_PROGRAM_MASTER epm,PROGRAM_OFFERED_BY pob,ENTITY_MASTER
		em,UNIVERSITY_ENTITY_TYPE uet where epm.program_id=pob.program_id AND
		em.entity_id=pob.offered_by AND em.university_id=uet.university_id AND
		pob.offered_by=em.entity_id AND em.entity_type=uet.entity_type AND
		uet.entity_description=#entity_description# AND
		uet.university_id=#university_id#;

</select>

	<!--
		**************************************queries for first degree
		components begins
		here**************************************************
	-->

	<insert id="insertfirstdegreecomponents">

		insert into
		PROGRAM_DEGREE(program_id,degree_code,insert_time,creator_id)
		values(#program_id#,#component#,#insert_time#,#creator_id#);

</insert>

	<resultMap id="getdegre" class="callcutoff">

		<result property="branch_code" column="degree_code" />
	</resultMap>

	<select id="getdegree" resultMap="getdegre">
		select degree_code from
		PROGRAM_DEGREE where
		program_id=#program_id#;
</select>

	<resultMap id="getdegrees" class="callcutoff">

		<result property="program_name" column="program_name" />
		<result property="component" column="component" />



	</resultMap>

	<select id="degreewithentitytype" resultMap="getdegrees">

		select distinct
		epm.program_name,epm1.program_name component from
		ENTITY_PROGRAM_MASTER epm,ENTITY_PROGRAM_MASTER
		epm1,PROGRAM_OFFERED_BY pob,PROGRAM_DEGREE pgd,UNIVERSITY_ENTITY_TYPE
		uet,ENTITY_MASTER em where epm.program_id=pob.program_id AND
		epm.program_id=pgd.program_id AND epm1.program_id=pgd.degree_code AND
		pob.offered_by=em.entity_id AND em.entity_type=uet.entity_type AND
		em.university_id=uet.university_id AND
		uet.entity_description=#entity_description# AND
		uet.university_id=#university_id#;

</select>



	<delete id="deletefrm1stdegree">

		delete cco from PROGRAM_DEGREE AS
		cco,ENTITY_PROGRAM_MASTER AS
		epm,ENTITY_PROGRAM_MASTER
		epm1,UNIVERSITY_ENTITY_TYPE AS uet where
		cco.program_id=epm.program_id
		AND
		cco.degree_code=epm1.program_id AND
		epm.program_name=#program_name#
		AND
		epm1.program_name=#component# AND
		uet.university_id=#university_id#;
		
</delete>

	<select id="degreewithentityname" resultMap="getdegrees">

		select distinct
		epm.program_name,epm1.program_name component from
		ENTITY_PROGRAM_MASTER
		epm,ENTITY_PROGRAM_MASTER epm1,PROGRAM_OFFERED_BY
		pob,PROGRAM_DEGREE
		pgd,UNIVERSITY_ENTITY_TYPE
		uet,ENTITY_MASTER em where
		epm.program_id=pob.program_id AND
		epm.program_id=pgd.program_id AND
		epm1.program_id=pgd.degree_code AND
		pob.offered_by=em.entity_id AND
		em.entity_type=uet.entity_type AND
		em.entity_name=#entity_name# AND
		uet.university_id=#university_id#;

</select>

	<select id="degreewithallvalues" resultMap="getdegrees">

		select distinct
		epm.program_name,epm1.program_name component from
		ENTITY_PROGRAM_MASTER epm,ENTITY_PROGRAM_MASTER
		epm1,PROGRAM_OFFERED_BY pob,PROGRAM_DEGREE pgd,UNIVERSITY_ENTITY_TYPE
		uet,ENTITY_MASTER em where
		epm.program_id=pob.program_id AND
		epm.program_id=pgd.program_id AND
		epm1.program_id=pgd.degree_code AND
		em.entity_type=uet.entity_type AND
		epm.program_name=#program_name#
		AND
		uet.university_id=#university_id#;

</select>


	<!--
		**************************************queries for call cut off details
		begins here**************************************************
	-->

	<resultMap id="getit" class="callcutoff">

		<result property="cos_value" column="cos_value" />
		<result property="no_of_times" column="number_of_times" />
		<result property="cut_off_number" column="cut_off_number" />
		<result property="cut_off_percentage" column="cut_off_percentage" />
		<result property="no_of_times_active" column="number_of_times_active" />
		<result property="cut_off_number_active" column="cut_off_number_active" />
		<result property="cut_off_percentage_active" column="cut_off_percentage_active" />

	</resultMap>

	<select id="detailsofcos" resultMap="getit">

		select distinct
		cos_value,number_of_times,number_of_times_active,cut_off_number,cut_off_number_active,cut_off_percentage,cut_off_percentage_active
		from
		CALL_CUT_OFF where
		program_id=#program_id#
		AND
		branch_code=#branch_code#;

</select>

	<resultMap id="getsection" class="callcutoff">

		<result property="program_id" column="program_id" />
		<result property="program_name" column="program_name" />
		<result property="entity_id" column="entity_id" />
		<result property="branch_name" column="branch_name" />
		<result property="branch" column="branch" />

	</resultMap>


	<select id="getcalledprograms" resultMap="getsection">

		select distinct
		epm.program_id,epm.program_name,em.entity_id,pbs.branch_name,pob.branch
		from ENTITY_PROGRAM_MASTER epm,PROGRAM_OFFERED_BY pob,ENTITY_MASTER
		em,PROGRAM_BRANCHES pbs,CALL_CUT_OFF cco,UNIVERSITY_ENTITY_TYPE uet
		where epm.program_id=pob.program_id AND em.entity_id=pob.offered_by
		AND pbs.branch_code=pob.branch AND cco.branch_code=pob.branch AND
		cco.program_id=pob.program_id AND pob.offered_by=em.entity_id AND
		em.entity_type=uet.entity_type AND em.university_id=uet.university_id
		AND uet.university_id=pbs.university_id AND
		entity_description=#entity_description# AND
		uet.university_id=#university_id# order by
		pob.program_id;

</select>



	<update id="updatecalldetails">


		update CALL_CUT_OFF cco,UNIVERSITY_ENTITY_TYPE uet
		SET
		cco.number_of_times_active=#no_of_times_active#,cco.cut_off_number=#cut_off_number#,
		cco.cut_off_number_active=#cut_off_number_active#,cco.cut_off_percentage=#cut_off_percentage#,
		cco.cut_off_percentage_active=#cut_off_percentage_active#,cco.modification_time=#modification_time#,cco.modifier_id=#modifier_id#
		where cco.program_id=#program_id# AND cco.branch_code=#branch_code#
		AND
		cco.cos_value=#cos_value#
		AND cco.number_of_times=#no_of_times# AND
		uet.university_id=#university_id#;
		
</update>

	<!--
		*********************************************queries for Special
		weightage start here**************************************************
	-->
	<resultMap id="methoddescriptions" class="callcutoff">

		<result property="program_id" column="weightage_id" />
		<result property="program_name" column="description" />


	</resultMap>

	<select id="methodgetdescriptions" resultMap="methoddescriptions">

		select
		weightage_id,description from WEIGHTAGE_DESCRIPTION where
		university_id=#uniid#;

</select>

	<resultMap id="methodvalue" class="callcutoff">

		<result property="program_id" column="weightage_id" />


	</resultMap>

	<select id="methodgetvalue" resultMap="methodvalue">

		select
		weightage_id from
		SPECIAL_WEIGHTAGE where
		university_id=#uniid#;

</select>

	<insert id="insertspecialweightagedetails">

		insert into
		SPECIAL_WEIGHTAGE(university_id,weightage_id,group_no,weightage_percentage,insert_time,creator_id)
		values(#university_id#,#component_id#,#branch_code#,#cut_off_number#,#insert_time#,#creator_id#);

</insert>

	<resultMap id="specialrecords" class="callcutoff">

		<result property="university_id" column="university_id" />
		<result property="program_id" column="description" />
		<result property="program_name" column="group_no" />
		<result property="entity_id" column="weightage_percentage" />


	</resultMap>

	<select id="getspecialrecords" resultMap="specialrecords">

		select distinct
		sw.university_id,wd.description,sw.group_no,sw.weightage_percentage
		from WEIGHTAGE_DESCRIPTION wd,SPECIAL_WEIGHTAGE
		sw,UNIVERSITY_ENTITY_TYPE uet where sw.weightage_id=wd.weightage_id
		AND wd.university_id=sw.university_id AND
		sw.university_id=uet.university_id AND
		wd.university_id=uet.university_id AND uet.university_id=#uniid#;

</select>

	<update id="updatespecialweightage">


		update SPECIAL_WEIGHTAGE SET
		group_no=#branch_code#,weightage_percentage=#cut_off_number#,
		modification_time=#modification_time#,modifier_id=#modifier_id#
		where
		university_id=#university_id# AND weightage_id IN(select
		weightage_id
		from WEIGHTAGE_DESCRIPTION where description=#category#);
		
</update>

	<delete id="deletefromspecialweightage">

		delete cco from SPECIAL_WEIGHTAGE AS
		cco,WEIGHTAGE_DESCRIPTION AS
		epm where
		cco.university_id=#university_id# AND cco.weightage_id
		=epm.weightage_id AND epm.description=#component#;
		
</delete>




</sqlMap>