/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package in.ac.dei.mhrd.omr;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;
import in.ac.dei.mhrd.omr.img.*;


/** 
 * MyEclipse Struts
 * Creation date: 10-06-2010
 * @author Anshul
 * XDoclet definition:
 * @struts.action path="/confirm" name="confirmAns" input="/confirmAnsJsp.jsp" scope="request" validate="true"
 * @struts.action-forward name="index" path="/index.jsp"
 * 
 * This class defines the method that inserts the correct answers read from the scanned sheet
 * once after user verified them.
 */
public class ConfirmAnsAction extends Action {
	/*
	 * Generated Methods
	 */

	/** 
	 * Method execute
	 * @param mapping
	 * @param form
	 * @param request
	 * @param response
	 * @return ActionForward
	 */
	public ActionForward execute(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) {
		ConfirmAnsForm confirmAns = (ConfirmAnsForm) form;// TODO Auto-generated method stub
		System.out.println("Inside confirm Action");
        int  testid = confirmAns.getTestid();
       int i= in.ac.dei.mhrd.omr.img.CorrectAns.insertCorrectAns(RotateImg.correctAns, testid);
       if(i>0){
        request.setAttribute("confirmAnsMsg", "Answer Inserted Successfully");
       }
       else{
           request.setAttribute("confirmAnsMsg", "Answer not Inserted");

       }
         //byte[] correctAns;
       // RotateImg obj = new RotateImg();
          
         /*
         System.out.println("size :" + RotateImg.correctAns.length);
         for(int i=0;i<RotateImg.correctAns.length;i++){
        	 System.out.println(i+ "correct conf   " +RotateImg.correctAns[i]);
         }
			*/	return mapping.findForward("confirmAnsMsg1");
	}
}