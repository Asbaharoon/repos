<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7 : Virtual lab admin interface : /admin/oauth/Auth/OpenID/DumbStore.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Virtual lab admin interface</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7 at Tue Dec  7 15:36:31 2010 -->
<!-- PHPXref (c) 2000-2007 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='admin/oauth/Auth/OpenID';
filename='DumbStore.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/admin/oauth/Auth/OpenID/</a> -> <a href="DumbStore.php.html">DumbStore.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="DumbStore.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="DumbStore.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">/**</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> * This file supplies a dumb store backend for OpenID servers and</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * consumers.</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> *</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> * PHP versions 4 and 5</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> *</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * LICENSE: See the COPYING file included in this distribution.</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> *</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * @package OpenID</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> * @author JanRain, Inc. &lt;openid@janrain.com&gt;</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * @copyright 2005-2008 Janrain, Inc.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> * @license http://www.apache.org/licenses/LICENSE-2.0 Apache</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> */</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Import the interface for creating a new store class.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> */</span>
<a name="l20"><span class="linenum">  20</span></a>  require_once 'Auth/OpenID/Interface.php';
<a name="l21"><span class="linenum">  21</span></a>  require_once 'Auth/OpenID/HMAC.php';
<a name="l22"><span class="linenum">  22</span></a>  
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment">/**</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * This is a store for use in the worst case, when you have no way of</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * saving state on the consumer site. Using this store makes the</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * consumer vulnerable to replay attacks, as it's unable to use</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * nonces. Avoid using this store if it is at all possible.</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> *</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * Most of the methods of this class are implementation details.</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Users of this class need to worry only about the constructor.</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @package OpenID</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> */</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('Auth_OpenID_DumbStore')" href="../../../../_classes/auth_openid_dumbstore.html" onMouseOver="classPopup(event,'auth_openid_dumbstore')">Auth_OpenID_DumbStore</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('Auth_OpenID_OpenIDStore')" href="../../../../_classes/auth_openid_openidstore.html" onMouseOver="classPopup(event,'auth_openid_openidstore')">Auth_OpenID_OpenIDStore</a> {
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>      <span class="comment">/**</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     * Creates a new {@link Auth_OpenID_DumbStore} instance. For the security</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">     * of the tokens generated by the library, this class attempts to</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     * at least have a secure implementation of getAuthKey.</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     *</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * When you create an instance of this class, pass in a secret</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     * phrase. The phrase is hashed with sha1 to make it the correct</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     * length and form for an auth key. That allows you to use a long</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     * string as the secret phrase, which means you can make it very</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">     * difficult to guess.</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     *</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">     * Each {@link Auth_OpenID_DumbStore} instance that is created for use by</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * your consumer site needs to use the same $secret_phrase.</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     *</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * @param string secret_phrase The phrase used to create the auth</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     * key returned by getAuthKey</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     */</span>
<a name="l53"><span class="linenum">  53</span></a>      function <a class="function" onClick="logFunction('Auth_OpenID_DumbStore')" href="../../../../_functions/auth_openid_dumbstore.html" onMouseOver="funcPopup(event,'auth_openid_dumbstore')">Auth_OpenID_DumbStore</a>(<a class="var it1890" onMouseOver="hilite(1890)" onMouseOut="lolite()" onClick="logVariable('secret_phrase')" href="../../../../_variables/secret_phrase.html">$secret_phrase</a>)
<a name="l54"><span class="linenum">  54</span></a>      {
<a name="l55"><span class="linenum">  55</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('auth_key')" class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" href="../../../../_variables/auth_key.html">auth_key</a> = <a class="function" onClick="logFunction('Auth_OpenID_SHA1')" href="../../../../_functions/auth_openid_sha1.html" onMouseOver="funcPopup(event,'auth_openid_sha1')">Auth_OpenID_SHA1</a>(<a class="var it1890" onMouseOver="hilite(1890)" onMouseOut="lolite()" onClick="logVariable('secret_phrase')" href="../../../../_variables/secret_phrase.html">$secret_phrase</a>);
<a name="l56"><span class="linenum">  56</span></a>      }
<a name="l57"><span class="linenum">  57</span></a>  
<a name="l58"><span class="linenum">  58</span></a>      <span class="comment">/**</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     * This implementation does nothing.</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     */</span>
<a name="l61"><span class="linenum">  61</span></a>      function <a class="function" onClick="logFunction('storeAssociation')" href="../../../../_functions/storeassociation.html" onMouseOver="funcPopup(event,'storeassociation')">storeAssociation</a>(<a class="var it181" onMouseOver="hilite(181)" onMouseOut="lolite()" onClick="logVariable('server_url')" href="../../../../_variables/server_url.html">$server_url</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('association')" href="../../../../_variables/association.html">$association</a>)
<a name="l62"><span class="linenum">  62</span></a>      {
<a name="l63"><span class="linenum">  63</span></a>      }
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>      <span class="comment">/**</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     * This implementation always returns null.</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     */</span>
<a name="l68"><span class="linenum">  68</span></a>      function <a class="function" onClick="logFunction('getAssociation')" href="../../../../_functions/getassociation.html" onMouseOver="funcPopup(event,'getassociation')">getAssociation</a>(<a class="var it181" onMouseOver="hilite(181)" onMouseOut="lolite()" onClick="logVariable('server_url')" href="../../../../_variables/server_url.html">$server_url</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('handle')" href="../../../../_variables/handle.html">$handle</a> = null)
<a name="l69"><span class="linenum">  69</span></a>      {
<a name="l70"><span class="linenum">  70</span></a>          return null;
<a name="l71"><span class="linenum">  71</span></a>      }
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>      <span class="comment">/**</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     * This implementation always returns false.</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     */</span>
<a name="l76"><span class="linenum">  76</span></a>      function <a class="function" onClick="logFunction('removeAssociation')" href="../../../../_functions/removeassociation.html" onMouseOver="funcPopup(event,'removeassociation')">removeAssociation</a>(<a class="var it181" onMouseOver="hilite(181)" onMouseOut="lolite()" onClick="logVariable('server_url')" href="../../../../_variables/server_url.html">$server_url</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('handle')" href="../../../../_variables/handle.html">$handle</a>)
<a name="l77"><span class="linenum">  77</span></a>      {
<a name="l78"><span class="linenum">  78</span></a>          return false;
<a name="l79"><span class="linenum">  79</span></a>      }
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>      <span class="comment">/**</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">     * In a system truly limited to dumb mode, nonces must all be</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">     * accepted. This therefore always returns true, which makes</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     * replay attacks feasible.</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">     */</span>
<a name="l86"><span class="linenum">  86</span></a>      function <a class="function" onClick="logFunction('useNonce')" href="../../../../_functions/usenonce.html" onMouseOver="funcPopup(event,'usenonce')">useNonce</a>(<a class="var it181" onMouseOver="hilite(181)" onMouseOut="lolite()" onClick="logVariable('server_url')" href="../../../../_variables/server_url.html">$server_url</a>, <a class="var it180" onMouseOver="hilite(180)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../../_variables/timestamp.html">$timestamp</a>, <a class="var it203" onMouseOver="hilite(203)" onMouseOut="lolite()" onClick="logVariable('salt')" href="../../../../_variables/salt.html">$salt</a>)
<a name="l87"><span class="linenum">  87</span></a>      {
<a name="l88"><span class="linenum">  88</span></a>          return true;
<a name="l89"><span class="linenum">  89</span></a>      }
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>      <span class="comment">/**</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">     * This method returns the auth key generated by the constructor.</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">     */</span>
<a name="l94"><span class="linenum">  94</span></a>      function <a class="function" onClick="logFunction('getAuthKey')" href="../../../../_functions/getauthkey.html" onMouseOver="funcPopup(event,'getauthkey')">getAuthKey</a>()
<a name="l95"><span class="linenum">  95</span></a>      {
<a name="l96"><span class="linenum">  96</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('auth_key')" class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" href="../../../../_variables/auth_key.html">auth_key</a>;
<a name="l97"><span class="linenum">  97</span></a>      }
<a name="l98"><span class="linenum">  98</span></a>  }
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'usenonce': ['usenonce', 'Return whether this nonce is present. As a side effect, mark it as no longer present. ', [['admin/oauth/Auth/OpenID','FileStore.php',354],['admin/oauth/Auth/OpenID','MemcachedStore.php',161],['admin/oauth/Auth/OpenID','SQLStore.php',480],['admin/oauth/Auth/OpenID','DumbStore.php',81],['admin/oauth/Auth/OpenID','Interface.php',164]], 1],
'getassociation': ['getassociation', 'Retrieve an association. If no handle is specified, return the association with the most recent issue time. ', [['admin/oauth/Auth/OpenID','FileStore.php',226],['admin/oauth/Auth/OpenID','Server.php',1393],['admin/oauth/Auth/OpenID','MemcachedStore.php',87],['admin/oauth/Auth/OpenID','SQLStore.php',409],['admin/oauth/Auth/OpenID','DumbStore.php',65],['admin/oauth/Auth/OpenID','Interface.php',104]], 7],
'getauthkey': ['getauthkey', 'This method returns the auth key generated by the constructor. ', [['admin/oauth/Auth/OpenID','DumbStore.php',91]], 0],
'auth_openid_dumbstore': ['auth_openid_dumbstore', 'Creates a new {@link Auth_OpenID_DumbStore} instance. For the security of the tokens generated by the library, this class attempts to at least have a secure implementation of getAuthKey. ', [['admin/oauth/Auth/OpenID','DumbStore.php',36]], 0],
'storeassociation': ['storeassociation', 'Store an association in the association directory. ', [['admin/oauth/Auth/OpenID','FileStore.php',179],['admin/oauth/Auth/OpenID','MemcachedStore.php',50],['admin/oauth/Auth/OpenID','SQLStore.php',346],['admin/oauth/Auth/OpenID','DumbStore.php',58],['admin/oauth/Auth/OpenID','Interface.php',31]], 2],
'removeassociation': ['removeassociation', 'Remove an association if it exists. Do nothing if it does not. ', [['admin/oauth/Auth/OpenID','FileStore.php',333],['admin/oauth/Auth/OpenID','MemcachedStore.php',122],['admin/oauth/Auth/OpenID','SQLStore.php',392],['admin/oauth/Auth/OpenID','DumbStore.php',73],['admin/oauth/Auth/OpenID','Interface.php',140]], 4],
'auth_openid_sha1': ['auth_openid_sha1', 'SHA1_BLOCKSIZE is this module\'s SHA1 blocksize used by the fallback implementation. ', [['admin/oauth/Auth/OpenID','HMAC.php',19]], 5]};
CLASS_DATA={
'auth_openid_openidstore': ['auth_openid_openidstore', 'This is the interface for the store objects the OpenID library uses. It is a single class that provides all of the persistence mechanisms that the OpenID library needs, for both servers and consumers.  If you want to create an SQL-driven store, please see then {@link Auth_OpenID_SQLStore} class. ', [['admin/oauth/Auth/OpenID','Interface.php',16]], 10],
'auth_openid_dumbstore': ['auth_openid_dumbstore', 'This is a store for use in the worst case, when you have no way of saving state on the consumer site. Using this store makes the consumer vulnerable to replay attacks, as it\'s unable to use nonces. Avoid using this store if it is at all possible. ', [['admin/oauth/Auth/OpenID','DumbStore.php',23]], 0]};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Tue Dec  7 15:36:31 2010</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7</a></i></td>
	</tr>
</table>
</body></html>
